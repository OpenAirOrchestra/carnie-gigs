{"version":3,"sources":["Configuration.js","AttendanceService.js","EventService.js","UserService.js","Header.js","SearchBar.js","AttendanceRecord.js","AttendanceList.js","NewAttendeeForm.js","Loading.js","AttendanceSheet.js","index.js"],"names":["Configuration","attendanceService","eventService","userService","pluginName","AttendanceService","deleteUnsupported","paramString","window","location","search","URLSearchParams","get","page","per_page","event_id","a","searchParams","_wpnonce","this","restNonce","set","url","serviceLocation","toString","fetch","response","ok","console","log","status","statusText","text","Error","json","id","attendanceRecord","method","mode","headers","body","JSON","stringify","Promise","resolve","EventService","date","offset","getTimezoneOffset","localDate","Date","getTime","dateString","toISOString","substring","event","UserService","Header","props","name","element","href","className","SearchBar","searchTerm","setSearchTerm","filterRecent","setFilterRecent","filterOld","setFilterOld","filterNew","setFilterNew","filterPresent","setFilterPresent","searchElement","type","placeholder","value","onChange","target","results","checked","htmlFor","AttendanceRecord","attendee","pendingMap","addAttendanceRecord","deleteAttendanceRecord","key","attendeeKey","pending","present","shortNotes","notes","length","phone","email","attendanceIcon","attendanceClassName","pendingClassName","showEmailAndPhone","attendeeDetails","pendingSpinner","lastname","onClick","firstname","user_id","AttendanceList","attendees","rows","sort","b","aFirstname","toLowerCase","bFirstname","aLastname","bLastname","map","NewAttendeeForm","hideAttendeeForm","useState","setFirstname","setLastname","setEmail","setPhone","setNotes","emailAndPhoneElement","action","disabled","attAttendanceRecord","handleAdd","Loading","isLoading","AttendanceSheet","eventId","setEventId","setIsLoading","eventRecord","setEventRecord","users","setUsers","recents","setRecents","recentUserKeys","setRecentUserKeys","currentAttendees","setCurrentAttendees","setPending","modificationPromise","setModificationPromise","pendingAttendee","useEffect","configureServices","loadEventId","loadAll","searchedAttendees","pattern","replace","result","filter","Object","values","String","join","includes","searchAttendees","attendanceMap","user","first_name","last_name","display_name","description","recent","currentAttendee","possibleAttendees","filteredAttendees","isRecent","has","filterAttendees","showNewAttendeeForm","eventURL","title","handleError","error","confirm","reload","roughTimeOfDay","hours","getHours","fetchUsers","allUsers","moreUsers","retrieve","fetchCurrentAttendees","allAttendees","moreAttendees","fetchRecentAttendees","urlParams","urlMaxRecents","maxRecents","Math","min","eventRecordPromise","usersPromise","recentsPromise","attendeesPromise","Set","add","newPending","push","pendingRecords","newAttendee","undefined","create","delete","currentAttendeesPromise","pathComponents","pathname","split","events","locale","navigator","languages","titleString","toLocaleDateString","weekday","day","month","year","createdEvent","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2e561556.chunk.js","sourcesContent":[" let Configuration = {\n\n    attendanceService : null,\n    eventService : null,\n    userService: null,\n    pluginName: null,\n   \n}\n\nexport default Configuration;\n","import Configuration from './Configuration';\n\n/// Restful web service for getting attendance records.\n/// See:  https://dzone.com/articles/consuming-rest-api-with-reactjs\nclass AttendanceService {\n\n    deleteUnsupported = false;\n\n    /// Get rest api location\n    serviceLocation() {\n        return \"../../../../?rest_route=/\" + Configuration.pluginName + \"/v1/attendees\";\n    }\n\n    restNonce() {\n        const paramString = window.location.search;\n        const urlParams = new URLSearchParams(paramString);\n        return urlParams.get('_wpnonce');\n    }\n\n    async retrieve(page, per_page, event_id) {\n        const searchParams = new URLSearchParams({\n            page: page,\n            per_page: per_page,\n            _wpnonce: this.restNonce()\n        });\n\n        if (event_id) {\n            searchParams.set('search', event_id);\n        }\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to get attendees Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n\n    /// Get request (get an event)\n    async get(id) {\n        const searchParams = new URLSearchParams({\n            _wpnonce: this.restNonce()\n        });\n\n        const url = this.serviceLocation() + \"/\" + id + \"&\" + searchParams.toString();\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to get attendee Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n\n    async create(attendanceRecord) {\n        const searchParams = new URLSearchParams({\n            _wpnonce: this.restNonce()\n        });\n\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n        const response = await fetch(url, {\n            method: \"POST\",\n            mode: \"cors\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(attendanceRecord)\n        });\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to create attendance record Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n\n    async delete(attendanceRecord) {\n        const id = attendanceRecord.id;\n        let response = null;\n\n        if (!this.deleteUnsupported) {\n            // Firt try normal DELETE\n            const searchParams = new URLSearchParams({\n                _wpnonce: this.restNonce()\n            });\n\n            const url = this.serviceLocation() + \"/\" + id + \"&\" + searchParams.toString();\n\n            response = await fetch(url, {\n                method: \"DELETE\",\n                mode: \"cors\"\n            })\n\n            if (!response.ok) {\n                this.deleteUnsupported = true;\n            }\n        }\n\n        if (this.deleteUnsupported) {\n            // If DELETE failed, try the hack.  DELETE may fail because of server configuration.\n            const searchParams = new URLSearchParams({\n                method: 'DELETE',\n                _wpnonce: this.restNonce()\n            });\n            const url = this.serviceLocation() + \"/\" + id + \"&\" + searchParams.toString();\n\n            response = await fetch(url, {\n                method: \"POST\",\n                mode: \"cors\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(attendanceRecord)\n            });\n        }\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to delete attendee Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return Promise.resolve(response);\n    }\n}\n\nexport default AttendanceService;\n","import Configuration from './Configuration';\n\n/// Restful web service for getting attendance records.\n/// See:  https://dzone.com/articles/consuming-rest-api-with-reactjs\n/// See:  https://developer.wordpress.org/rest-api/\nclass EventService {\n\n    /// Get rest api location\n    serviceLocation() {\n        return \"../../../../?rest_route=/\" + Configuration.pluginName + \"/v1/events\";\n    }\n\n    restNonce() {\n        const paramString = window.location.search;\n        const urlParams = new URLSearchParams(paramString);\n        return urlParams.get('_wpnonce');\n    }\n\n    async retrieve(page, per_page, date) {\n\n        const searchParams = new URLSearchParams({\n            page: page,\n            per_page: per_page,\n            _wpnonce: this.restNonce()\n        });\n        if (date) {\n            // YYYY-MM-DD, local time please.\n            const offset = date.getTimezoneOffset();\n            const localDate = new Date(date.getTime() - (offset * 60 * 1000));\n            const dateString = localDate.toISOString().substring(0, 10);\n\n            searchParams.set('search', dateString);\n        }\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to get workshops Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n\n    /// Get request (get an event)\n    async get(id) {\n        const searchParams = new URLSearchParams({\n            _wpnonce: this.restNonce()\n        });\n\n        const url = this.serviceLocation() + \"/\" + id + \"&\" + searchParams.toString();\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to get workshop Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n\n    // Create event (post)\n    async create(event) {\n        const searchParams = new URLSearchParams({\n            _wpnonce: this.restNonce()\n        });\n\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n\n        const response = await fetch(url, {\n            method: \"POST\",\n            mode: \"cors\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(event)\n        });\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to create workshop Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n}\n\nexport default EventService;\n","import Configuration from './Configuration';\n\n/// webservice for getting users from wordpress.\n/// See: https://dzone.com/articles/consuming-rest-api-with-reactjs\n/// See: https://developer.wordpress.org/rest-api/reference/users/\n\nclass UserService {\n\n    /// Get rest api location\n    serviceLocation() {\n        return \"../../../../?rest_route=/\" + Configuration.pluginName + \"/v1/users\";\n    }\n\n    restNonce() {\n        const paramString = window.location.search;\n        const urlParams = new URLSearchParams(paramString);\n        return urlParams.get('_wpnonce');\n    }\n\n    /// Retrieve users.\n    /// page and per_page are needed because of the limits on the wordpress json api.\n    async retrieve(page, per_page) {\n\n        const searchParams = new URLSearchParams({\n            page: page,\n            per_page: per_page,\n            _wpnonce: this.restNonce()\n        });\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            console.log(\"Failed url fetch: \" + response.status + \" \" + response.statusText);\n            const text = await response.text();\n            console.log(\"Response text: \" + text);\n            throw new Error(\"Failed to list users Response: \" + response.status + \" \" + response.statusText);\n        }\n\n        return response.json();\n    }\n}\n\nexport default UserService;\n","import React from 'react';\n\nexport default Header\n\nfunction Header(props) {\n  const name = props.name;\n  const url = props.url;\n\n  let element =  <h1>Loading...</h1>;\n\n  if (name) {\n    element = <h1>>Attendance for {name}</h1>;\n  }\n  if (url && name) {\n    element =  <h1>Attendance for <a href={url}>{name}</a></h1>;\n  } \n  \n  return (\n    <div className='Header'>\n      {element}\n    </div>\n  )\n}\n","import React from 'react';\n\nexport default SearchBar\n\nfunction SearchBar(props) {\n  const searchTerm = props.searchTerm;\n  const setSearchTerm = props.setSearchTerm;\n\n  const filterRecent = props.filterRecent;\n  const setFilterRecent = props.setFilterRecent;\n  const filterOld = props.filterOld;\n  const setFilterOld = props.setFilterOld;\n  const filterNew = props.filterNew;\n  const setFilterNew = props.setFilterNew;\n  const filterPresent = props.filterPresent;\n  const setFilterPresent = props.setFilterPresent;\n\n  const searchElement = searchTerm ?\n    (<input type=\"search\" name=\"search\" placeholder=\"Search\" value={searchTerm}\n      onChange={(event) => setSearchTerm(event.target.value)} />)\n    : (<input type=\"search\" name=\"search\" results=\"0\" placeholder=\"Search\" value={searchTerm}\n      onChange={(event) => setSearchTerm(event.target.value)} />);\n\n  return (\n    <div className='SearchBar'>\n      <form>\n        {searchElement}\n        <br />\n        <input type=\"checkbox\" name=\"recent\" id=\"recent\" checked={!!filterRecent}\n          onChange={(event) => setFilterRecent(event.target.checked)} />\n        <label htmlFor=\"recent\">recent</label>\n        <input type=\"checkbox\" name=\"old\" id=\"old\" checked={!!filterOld}\n          onChange={(event) => setFilterOld(event.target.checked)} />\n        <label htmlFor=\"old\">rusty</label>\n        <input type=\"checkbox\" name=\"new\" id=\"new\" checked={!!filterNew}\n          onChange={(event) => setFilterNew(event.target.checked)} />\n        <label htmlFor=\"new\">new folks</label>\n        <input type=\"checkbox\" name=\"attendees\" id=\"attendees\" checked={!!filterPresent}\n          onChange={(event) => setFilterPresent(event.target.checked)} />\n        <label htmlFor=\"attendees\">attendees</label>\n      </form>\n    </div>\n  )\n}\n","import React from 'react';\nimport Configuration from './Configuration';\n\nexport default AttendanceRecord\n\nexport function attendeeKey(attendee) {\n  let key = attendee.user_id;\n\n  if (!key || key === '0') {\n    key = (attendee.firstname + '.' + attendee.lastname);\n  }\n  return key.toString();\n}\n\nfunction AttendanceRecord(props) {\n  const attendee = props.attendee;\n  const pendingMap = props.pendingMap ? props.pendingMap : {};\n  const event_id = props.event_id;\n  const addAttendanceRecord = props.addAttendanceRecord;\n  const deleteAttendanceRecord = props.deleteAttendanceRecord;\n\n  const key = attendeeKey(attendee);\n\n  const pending = pendingMap[key];\n  const present = attendee.event_id && (attendee.event_id === event_id);\n\n  const maxNoteLen = 100;\n  const shortNotes = !attendee.notes || attendee.notes.length < maxNoteLen ? attendee.notes : `${attendee.notes.substring(0, maxNoteLen)}\\u2026`;\n  const notes = shortNotes ? <div> {shortNotes} </div> : '';\n  const phone = attendee.phone ? <span> {attendee.phone} </span> : '';\n  const email = attendee.email ? <span> {attendee.email} </span> : '';\n\n  const attendanceIcon = present ? '\\u2714' : '\\u274c';\n  const attendanceClassName = present ? 'present' : 'absent';\n  const pendingClassName = pending ? 'pending' : '';\n\n  const showEmailAndPhone = Configuration.pluginName === 'workshop_attendance';\n\n  const attendeeDetails = <div>\n    {notes}\n    {showEmailAndPhone ? email : ''}\n    {showEmailAndPhone ? phone : ''}\n  </div>;\n\n  const pendingSpinner = pending ? (<span className=\"pending-spinner\" />) : '';\n\n  const lastname = attendee.lastname;\n  return (\n    <tr className={'AttendanceRecord  ' + attendanceClassName + ' ' + pendingClassName}\n      onClick={() => {\n        if (present && !pending) {\n          deleteAttendanceRecord(attendee);\n        } else if (!pending) {\n          addAttendanceRecord(attendee);\n        }\n      }} >\n      <td className='attendee' >\n        {attendee.firstname + ' ' + lastname}\n        <div className=\"details\">\n          {attendeeDetails}\n        </div>\n      </td>\n      <td className='presence' >{pendingSpinner}<span className='presenceIcon'>{attendanceIcon}</span></td>\n    </tr>\n  )\n}\n","import React from 'react';\n\nimport AttendanceRecord, { attendeeKey } from './AttendanceRecord.js'\n\nexport default AttendanceList\n\nfunction AttendanceList(props) {\n  const attendees = props.attendees;\n  const pendingMap = props.pendingMap ? props.pendingMap : {}\n  const event_id = props.event_id;\n\n  const addAttendanceRecord = props.addAttendanceRecord;\n  const deleteAttendanceRecord = props.deleteAttendanceRecord;\n\n  const rows = attendees\n    .sort((a, b) => {\n      let aFirstname = a.firstname.toLowerCase();\n      let bFirstname = b.firstname.toLowerCase();\n\n      if (aFirstname.toLowerCase() > bFirstname.toLowerCase()) {\n        return 1;\n      }\n\n      if (aFirstname.toLowerCase() < bFirstname.toLowerCase()) {\n        return -1;\n      }\n\n      let aLastname = a.lastname ? a.lastname.toLowerCase() : '';\n      let bLastname = b.lastname ? b.lastname.toLowerCase() : '';\n\n      if (aLastname.toLowerCase() > bLastname.toLowerCase()) {\n        return 1;\n      }\n\n      if (aLastname.toLowerCase() < bLastname.toLowerCase()) {\n        return -1;\n      }\n\n      return 0;\n    })\n    .map((attendee) =>\n      <AttendanceRecord attendee={attendee} event_id={event_id} pendingMap={pendingMap} key={attendeeKey(attendee)}\n        addAttendanceRecord={addAttendanceRecord}\n        deleteAttendanceRecord={deleteAttendanceRecord} />\n    );\n  return (\n    <div className='AttendanceList'>\n      <table>\n        <tbody>\n          {rows}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n","import React, { useState } from 'react';\nimport Configuration from './Configuration';\n\nexport default NewAttendeeForm\n\n/// Handle clicking on the add button\nfunction handleAdd(addAttendanceRecord, firstname, setFirstname, lastname, setLastname, email, setEmail, phone, setPhone, notes, setNotes, attAttendanceRecord) {\n  // Create record\n  const attendee = { firstname: firstname, lastname: lastname, email: email, phone: phone, notes: notes };\n\n  // Add the record\n  addAttendanceRecord(attendee);\n\n  // Clear the form.\n  setFirstname('');\n  setLastname('');\n  setEmail('');\n  setPhone('');\n  setNotes('');\n}\n\nfunction NewAttendeeForm(props) {\n\n  const hideAttendeeForm = props.hideAttendeeForm;\n  const addAttendanceRecord = props.addAttendanceRecord;\n\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [notes, setNotes] = useState('');\n\n  const showEmailAndPhone = Configuration.pluginName === 'workshop_attendance';\n  const emailAndPhoneElement = showEmailAndPhone ? (\n    <div>\n      <label htmlFor=\"email\">Email:</label>\n      <input type=\"text\" name=\"email\" id=\"email\" value={email} onChange={(event) => setEmail(event.target.value)} />\n      <br />\n      <label htmlFor=\"phone\">Phone:</label>\n      <input type=\"text\" name=\"phone\" id=\"phone\" value={phone} onChange={(event) => setPhone(event.target.value)} />\n      <br />\n    </div>\n  ) : <div/>\n\n  if (hideAttendeeForm) {\n    return null;\n  }\n\n  return (\n    <div className='NewAttendeeForm'>\n      <h2>Add New Attendee</h2>\n      <form action=\"\">\n        <label htmlFor=\"firstname\">First Name (required):</label>\n        <input type=\"text\" name=\"firstname\" id=\"firstname\" className='required' value={firstname} onChange={(event) => setFirstname(event.target.value)} />\n        <br />\n        <label htmlFor=\"lastname\">Last Name (required): </label>\n        <input type=\"text\" name=\"lastname\" id=\"lastname\" className='required' value={lastname} onChange={(event) => setLastname(event.target.value)} />\n        \n        { emailAndPhoneElement }\n\n        <label htmlFor=\"notes\">Notes:</label>\n        <br />\n        <textarea name=\"notes\" id=\"notes\" value={notes} onChange={(event) => setNotes(event.target.value)} />\n        <br />\n        <div className='centered'>\n          <input type=\"submit\" value=\"Add\" disabled={!(firstname && lastname)}\n            onClick={() => {\n              handleAdd(addAttendanceRecord, firstname, setFirstname, lastname, setLastname, email, setEmail, phone, setPhone, notes, setNotes);\n            }} />\n        </div>\n      </form>\n    </div>\n  )\n}\n","import React from 'react';\n\nexport default Loading\n\nfunction Loading(props) {\n    const isLoading = props.isLoading;\n\n    if (!isLoading) {\n        return null;\n    }\n\n    return (\n        <div className='Loading'>\n            <div className='inner'>\n                <div className='spinner'></div>\n            </div>\n        </div>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport Configuration from './Configuration';\nimport MockAttendanceService from './MockAttendanceService';\nimport MockEventService from './MockEventService';\nimport MockUserService from './MockUserService';\nimport AttendanceService from './AttendanceService';\nimport EventService from './EventService';\nimport UserService from './UserService';\n\nimport Header from './Header'\nimport SearchBar from './SearchBar'\nimport AttendanceList from './AttendanceList'\nimport { attendeeKey } from './AttendanceRecord';\nimport NewAttendeeForm from './NewAttendeeForm'\nimport Loading from './Loading'\n\nexport default AttendanceSheet\n\n/// Minimal error handling function\nfunction handleError(error) {\n\tif (window.confirm(error + \"\\nReload?\")) {\n\t\twindow.location.reload();\n\t}\n}\n\n/// Rough time of day (morning, afternoon, evening, night) from date\nfunction roughTimeOfDay(date) {\n\tconst hours = date.getHours();\n\tif (hours < 12) {\n\t\treturn \"Morning\";\n\t}\n\n\tif (hours < 17) {\n\t\treturn \"Afternoon\";\n\t}\n\n\tif (hours < 20) {\n\t\treturn \"Evening\";\n\t}\n\n\treturn \"Night\";\n}\n\n/// Compute attendees from users and attendance records\nfunction possibleAttendees(eventId, users, recents, currentAttendees, pending) {\n\tlet attendanceMap = {}\n\n\t// Add users to the map.\n\tfor (const user of users) {\n\t\tlet attendanceRecord = { user_id: user.id, firstname: '', lastname: '' };\n\t\tif (user.first_name) {\n\t\t\tattendanceRecord.firstname = user.first_name;\n\t\t\tif (user.last_name) {\n\t\t\t\tattendanceRecord.lastname = user.last_name;\n\t\t\t}\n\t\t} else if (user.display_name) {\n\t\t\tattendanceRecord.firstname = user.display_name;\n\t\t} \n\n\t\tif (user.email) {\n\t\t\tattendanceRecord.email = user.email;\n\t\t}\n\n\t\tif (user.description) {\n\t\t\tattendanceRecord.notes = user.description;\n\t\t}\n\n\t\tconst key = attendeeKey(attendanceRecord);\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Add recents to the map\n\tfor (const recent of recents) {\n\t\tif (recent.event_id === eventId) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst key = attendeeKey(recent);\n\t\tlet attendanceRecord = attendanceMap[key];\n\t\tif (!attendanceRecord) {\n\t\t\tattendanceRecord = { ...recent };\n\t\t} else {\n\t\t\tattendanceRecord = { ...attendanceRecord };\n\t\t}\n\n\t\tattendanceRecord.id = recent.id;\n\n\t\tif (!attendanceRecord.notes) {\n\t\t\tattendanceRecord.notes = recent.notes;\n\t\t}\n\t\tattendanceRecord.event_id = recent.event_id;\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Add currentAttendees to the map\n\tfor (const currentAttendee of currentAttendees) {\n\t\tconst key = attendeeKey(currentAttendee);\n\t\tlet attendanceRecord = attendanceMap[key];\n\t\tif (!attendanceRecord) {\n\t\t\tattendanceRecord = { ...currentAttendee };\n\t\t} else {\n\t\t\tattendanceRecord = { ...attendanceRecord };\n\t\t}\n\n\t\tattendanceRecord.id = currentAttendee.id;\n\t\tattendanceRecord.event_id = currentAttendee.event_id;\n\t\tif (currentAttendee.phone && !attendanceRecord.phone) {\n\t\t\tattendanceRecord.phone = currentAttendee.phone;\n\t\t}\n\t\tif (currentAttendee.user_id && !attendanceRecord.user_id) {\n\t\t\tattendanceRecord.user_id = currentAttendee.user_id;\n\t\t}\n\t\tif (currentAttendee.user_id && !attendanceRecord.user_id) {\n\t\t\tattendanceRecord.user_id = currentAttendee.user_id;\n\t\t}\n\t\tif (currentAttendee.firstname && !attendanceRecord.firstname) {\n\t\t\tattendanceRecord.firstname = currentAttendee.firstname;\n\t\t}\n\t\tif (currentAttendee.lastname && !attendanceRecord.lastname) {\n\t\t\tattendanceRecord.lastname = currentAttendee.lastname;\n\t\t}\n\t\tif (currentAttendee.notes && !attendanceRecord.notes) {\n\t\t\tattendanceRecord.notes = currentAttendee.notes;\n\t\t}\n\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Add pending to the map\n\tfor (const pendingAttendee of pending) {\n\t\tconst key = attendeeKey(pendingAttendee);\n\t\tlet attendanceRecord = attendanceMap[key];\n\t\tif (!attendanceRecord) {\n\t\t\tattendanceRecord = { ...pendingAttendee };\n\t\t} else {\n\t\t\tattendanceRecord = { ...attendanceRecord };\n\t\t}\n\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Iterate the map to create result.\n\tconst attendees = Object.values(attendanceMap);\n\treturn attendees ? attendees : [];\n}\n\n/// Return the subset of attendees with text that matches searchTerm\nfunction searchAttendees(attendees, searchTerm) {\n\tconst pattern = searchTerm ? searchTerm.toLowerCase().replace(/\\s+/g, '') : null;\n\tlet result = attendees;\n\n\tif (pattern) {\n\t\tresult = result.filter(attendee => {\n\t\t\tconst line = Object.values(attendee).map(value => {\n\t\t\t\treturn String(value).toLowerCase()\n\t\t\t}).join().replace(/\\s+/g, '');\n\t\t\treturn line.includes(pattern);\n\t\t})\n\t}\n\n\treturn result;\n}\n\n/// Return the subset of attendees that match the filter criteria\nfunction filterAttendees(eventId, attendees, recentUserKeys, filterRecent, filterOld, filterNew, filterPresent) {\n\tlet result = attendees;\n\n\tif (filterRecent || filterNew || filterOld || filterPresent) {\n\t\tresult = result.filter(attendee => {\n\n\t\t\tif (filterNew && (!attendee.user_id || attendee.user_id === '0')) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (filterPresent && attendee.event_id && attendee.event_id === eventId) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (filterRecent || filterOld) {\n\t\t\t\tconst key = attendeeKey(attendee);\n\t\t\t\tconst isRecent = recentUserKeys.has(key);\n\t\t\t\tif (filterRecent && isRecent) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (filterOld && !isRecent) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t});\n\t}\n\n\treturn result;\n}\n\n/// Fetch users from remote\nasync function fetchUsers() {\n\tconst userService = Configuration.userService;\n\n\tlet page = 1;\n\tconst per_page = 500;\n\tlet allUsers = [];\n\tlet moreUsers = true;\n\n\tdo {\n\t\tconst users = await userService.retrieve(page, per_page);\n\n\t\tallUsers = [...allUsers, ...users];\n\t\tmoreUsers = users.length >= per_page;\n\t\t\n\t\t++page;\n\t} while (moreUsers);\n\n\treturn Promise.resolve(allUsers);\n}\n\n/// Fetch current attendees\nasync function fetchCurrentAttendees(eventId) {\n\tconst attendanceService = Configuration.attendanceService;\n\n\tlet page = 1;\n\tconst per_page = 100;\n\tlet allAttendees = [];\n\tlet moreAttendees = true;\n\tdo {\n\t\tconst attendees = await attendanceService.retrieve(page, per_page, eventId);\n\t\tallAttendees = [...allAttendees, ...attendees];\n\t\tmoreAttendees = attendees.length >= per_page;\n\t\t++page;\n\t} while (moreAttendees);\n\n\treturn Promise.resolve(allAttendees);\n}\n\n/// Fetch recent attendees\nasync function fetchRecentAttendees() {\n\n\t// Get max recents from URL param string.\n\t// This so we can tune this better.\n\tconst paramString = window.location.search;\n\tconst urlParams = new URLSearchParams(paramString);\n\tlet urlMaxRecents = urlParams.get('max_recents');\n\tconst maxRecents = urlMaxRecents ? urlMaxRecents : 100; \n\n\tconst attendanceService = Configuration.attendanceService;\n\n\tlet page = 1;\n\tconst per_page = Math.min(maxRecents, 100);\n\tlet allAttendees = [];\n\tlet moreAttendees = true;\n\tdo {\n\t\tconst attendees = await attendanceService.retrieve(page, per_page);\n\t\tallAttendees = [...allAttendees, ...attendees];\n\t\tmoreAttendees = attendees.length >= per_page;\n\t\t++page;\n\t} while (moreAttendees && allAttendees.length < maxRecents);\n\n\treturn Promise.resolve(allAttendees);\n}\n\n/// Load all data from backend.\nasync function loadAll(eventId, setIsLoading, setEventRecord, setUsers, setRecents, setRecentUserKeys, setCurrentAttendees) {\n\ttry {\n\n\t\tconst eventService = Configuration.eventService;\n\t\tconst eventRecordPromise = eventService.get(eventId);\n\t\tconst usersPromise = fetchUsers();\n\t\tconst recentsPromise = fetchRecentAttendees();\n\t\tconst attendeesPromise = fetchCurrentAttendees(eventId);\n\n\t\tconst eventRecord = await eventRecordPromise;\n\t\tsetEventRecord(eventRecord);\n\t\t\n\t\tconst users = await usersPromise;\n\t\tsetUsers(users);\n\n\t\tconst recents = await recentsPromise;\n\t\tsetRecents(recents);\n\n\t\tlet recentUserKeys = new Set();\n\t\tfor (const recent of recents) {\n\t\t\tconst key = attendeeKey(recent);\n\t\t\trecentUserKeys.add(key);\n\t\t}\n\t\tsetRecentUserKeys(recentUserKeys);\n\n\t\tconst attendees = await attendeesPromise;\n\t\tsetCurrentAttendees(attendees);\n\n\t\tsetIsLoading(false);\n\t} catch (error) {\n\t\thandleError(error);\n\t}\n}\n\n/// Add an attendance record (add attendee)\nasync function addAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setCurrentAttendees) {\n\ttry {\n\t\tconst attendanceService = Configuration.attendanceService;\n\n\t\t// Add record to pending\n\t\tlet newPending = [...pending];\n\t\tnewPending.push(attendee);\n\t\tsetPending(newPending);\n\t\tattendanceService.pendingRecords = newPending;\n\n\t\t// Create the record to add\n\t\tlet newAttendee = { ...attendee };\n\t\tnewAttendee.event_id = eventId;\n\t\tnewAttendee.id = undefined;\n\n\t\t// Ask for the server to create the attendee record\n\t\tawait attendanceService.create(newAttendee);\n\n\t\t// Wait for previous modification to complete\n\t\tawait modificationPromise\n\n\t\t// List current attendees again and set them\n\t\tlet page = 1;\n\t\tlet per_page = 100;\n\t\tlet allAttendees = [];\n\t\tlet moreAttendees = true;\n\t\tdo {\n\t\t\tconst currentAttendees = await attendanceService.retrieve(page, per_page, eventId);\n\t\t\tallAttendees = [...allAttendees, ...currentAttendees];\n\t\t\tsetCurrentAttendees(allAttendees);\n\t\t\tmoreAttendees = currentAttendees.length >= per_page;\n\t\t\t++page;\n\t\t} while (moreAttendees);\n\n\t\t// Remove record from pending.\n\t\t// This could get messed up if we didn't serilize the modification requests.\n\t\tnewPending = [...attendanceService.pendingRecords].filter(pendingAttendee => {\n\t\t\treturn pendingAttendee !== attendee;\n\t\t});\n\t\tsetPending(newPending);\n\t\tattendanceService.pendingRecords = newPending;\n\t\tPromise.resolve(attendee);\n\t} catch (error) {\n\t\thandleError(error);\n\t}\n}\n\n/// Add an attendance record (add attendee)\nasync function deleteAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setRecents, setCurrentAttendees) {\n\ttry {\n\t\tconst attendanceService = Configuration.attendanceService;\n\n\t\t// Add record to pending\n\t\tlet newPending = [...pending];\n\t\tnewPending.push(attendee);\n\t\tsetPending(newPending);\n\t\tattendanceService.pendingRecords = newPending;\n\n\t\t// Delete the attendance record\n\t\tawait attendanceService.delete(attendee);\n\n\t\t// Wait for previous modification to complete\n\t\tawait modificationPromise\n\n\t\t// List recent attendees again and set them\n\t\tconst recentsPromise = fetchRecentAttendees();\n\n\t\t// List current attendees again and set them\n\t\tconst currentAttendeesPromise = fetchCurrentAttendees(eventId);\n\n\t\tconst recents = await recentsPromise;\n\t\tsetRecents(recents);\n\t\tconst currentAttendees = await currentAttendeesPromise;\n\t\tsetCurrentAttendees(currentAttendees);\n\n\t\t// Remove record from pending.\n\t\t// This could get messed up if we didn't serilize the modification requests.\n\t\tnewPending = [...attendanceService.pendingRecords].filter(pendingAttendee => {\n\t\t\treturn pendingAttendee !== attendee;\n\t\t});\n\t\tsetPending(newPending);\n\t\tattendanceService.pendingRecords = newPending;\n\t\tPromise.resolve(attendee);\n\t} catch (error) {\n\t\thandleError(error);\n\t}\n}\n\nfunction configureServices() {\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t// Development code\n\t\tif (!Configuration.userService) {\n\t\t\tConfiguration.eventService = new MockEventService();\n\t\t\tConfiguration.userService = new MockUserService();\n\t\t\tConfiguration.attendanceService = new MockAttendanceService();\n\t\t}\n\n\t\tif (!Configuration.pluginName) {\n\t\t\tConfiguration.pluginName = 'workshop_attendance';\n\t\t}\n\t} else {\n\t\t// production code\n\t\tif (!Configuration.userService) {\n\t\t\tConfiguration.eventService = new EventService();\n\t\t\tConfiguration.userService = new UserService();\n\t\t\tConfiguration.attendanceService = new AttendanceService();\n\t\t}\n\n\t\tif (!Configuration.pluginName) {\n\t\t\tconst pathname = window.location.pathname;\n\t\t\tconst pathComponents = pathname.split('/');\n\t\t\tConfiguration.pluginName = pathComponents[pathComponents.length - 3];\n\t\t}\n\t}\n}\n\nasync function loadEventId(setEventId) {\n\ttry {\n\t\tlet eventId = null;\n\n\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t\t// dummy event Id\n\t\t\teventId = 1000;\n\t\t}\n\n\t\t// get id from url param \"event_id\"\n\t\tif (!eventId) {\n\t\t\tconst paramString = window.location.search;\n\t\t\tconst urlParams = new URLSearchParams(paramString);\n\t\t\teventId = urlParams.get('event_id');\n\t\t}\n\n\t\t// No event id? try getting today's event.\n\t\tif (!eventId) {\n\t\t\tconfigureServices();\n\t\t\tconst eventService = Configuration.eventService;\n\n\t\t\t// try to find today's event\n\t\t\tconst events = await eventService.retrieve(1 /* page */, 100 /* limit */, new Date());\n\n\t\t\tif (events.length === 1) {\n\t\t\t\teventId = events[0].id;\n\t\t\t}\n\t\t}\n\n\t\t// Still no event id?  Create a new event\n\t\tif (!eventId) {\n\t\t\tconfigureServices();\n\t\t\tconst eventService = Configuration.eventService;\n\n\t\t\tconst date = new Date();\n\t\t\t// YYYY-MM-DD, local time please.\n\t\t\tconst offset = date.getTimezoneOffset();\n\t\t\tconst localDate = new Date(date.getTime() - (offset * 60 * 1000));\n\t\t\tconst dateString = localDate.toISOString().substring(0, 10);\n\n\t\t\tconst locale = navigator.languages[0];\n\t\t\tconst titleString = localDate.toLocaleDateString(locale, { weekday: 'long' }) + \" \" + roughTimeOfDay(date) + \" Workshop \" + localDate.toLocaleDateString(locale, { day: 'numeric', month: 'long', year: 'numeric' });\n\t\t\tconst event = {\n\t\t\t\tdate: dateString,\n\t\t\t\ttitle: titleString\n\t\t\t};\n\n\t\t\tconst createdEvent = await eventService.create(event);\n\t\t\teventId = createdEvent.id;\n\t\t}\n\n\t\tsetEventId(eventId);\n\t\treturn Promise.resolve(eventId);\n\t} catch (error) {\n\t\thandleError(error);\n\t}\n}\n\n/// The actual component!\nfunction AttendanceSheet(props) {\n\tconst [eventId, setEventId] = useState(0);\n\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst [searchTerm, setSearchTerm] = useState('');\n\n\tconst [filterRecent, setFilterRecent] = useState(false);\n\tconst [filterOld, setFilterOld] = useState(false);\n\tconst [filterNew, setFilterNew] = useState(false);\n\tconst [filterPresent, setFilterPresent] = useState(false);\n\n\tconst [eventRecord, setEventRecord] = useState(null);\n\tconst [users, setUsers] = useState([]);\n\tconst [recents, setRecents] = useState([])\n\tconst [recentUserKeys, setRecentUserKeys] = useState(null);\n\tconst [currentAttendees, setCurrentAttendees] = useState([]);\n\tconst [pending, setPending] = useState([]);\n\n\tconst [modificationPromise, setModificationPromise] = useState(null);\n\n\tlet pendingMap = {};\n\tfor (const pendingAttendee of pending) {\n\t\tconst key = attendeeKey(pendingAttendee);\n\t\tpendingMap[key] = pendingAttendee;\n\t}\n\n\t// Set up configuration\n\tuseEffect(() => {\n\t\tconfigureServices();\n\t});\n\n\t// load the current event id\n\tuseEffect(() => {\n\t\tif (!eventId) {\n\t\t\tloadEventId(setEventId);\n\t\t}\n\t}, [eventId]);\n\n\t// Load initial data.\n\tuseEffect(() => {\n\t\tif (isLoading && eventId) {\n\t\t\tloadAll(eventId, setIsLoading, setEventRecord, setUsers, setRecents, setRecentUserKeys, setCurrentAttendees)\n\t\t}\n\t}, [isLoading, eventId]);\n\n\t// Attendance\n\tconst attendees = possibleAttendees(eventId, users, recents, currentAttendees, pending);\n\n\t// Search\n\tconst searchedAttendees = searchAttendees(attendees, searchTerm);\n\n\t// Filter\n\tconst filteredAttendees = filterAttendees(eventId, searchedAttendees, recentUserKeys, filterRecent, filterOld, filterNew, filterPresent);\n\n\tconst showNewAttendeeForm = !isLoading && (filterNew || filterPresent || !filterRecent);\n\n\t// url for workshop or gig\n\tlet eventURL = eventId ? \"../../../../wp-admin/admin.php?page=workshop&workshop=\" + eventId : null;\n\t\n\tif (Configuration.pluginName === 'carnie-gigs') {\n\t\t// http://localhost:8888/wordpress/wp-admin/post.php?post=16083&action=edit\n\t     eventURL = eventId ? \"../../../../?page_id=\" + eventId : null;\n\t}\n\n\treturn (\n\t\t<div className=\"AttendanceSheet\">\n\t\t\t<Header name={eventRecord ? eventRecord.title : ''} url={eventURL} />\n\t\t\t<SearchBar\n\t\t\t\tsearchTerm={searchTerm} setSearchTerm={setSearchTerm}\n\t\t\t\tfilterRecent={filterRecent} setFilterRecent={setFilterRecent}\n\t\t\t\tfilterOld={filterOld} setFilterOld={setFilterOld}\n\t\t\t\tfilterNew={filterNew} setFilterNew={setFilterNew}\n\t\t\t\tfilterPresent={filterPresent} setFilterPresent={setFilterPresent}\n\t\t\t/>\n\t\t\t<AttendanceList attendees={filteredAttendees} event_id={eventId} pendingMap={pendingMap}\n\t\t\t\taddAttendanceRecord={(attendee) => {\n\t\t\t\t\tsetModificationPromise(addAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setCurrentAttendees));\n\t\t\t\t}}\n\t\t\t\tdeleteAttendanceRecord={(attendee) => {\n\t\t\t\t\tsetModificationPromise(deleteAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setRecents, setCurrentAttendees));\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<NewAttendeeForm hideAttendeeForm={!showNewAttendeeForm}\n\t\t\t\taddAttendanceRecord={(attendee) => {\n\t\t\t\t\tsetModificationPromise(addAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setCurrentAttendees));\n\t\t\t\t}} />\n\t\t\t<Loading isLoading={isLoading} />\n\t\t</div>\n\t)\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport AttendanceSheet from './AttendanceSheet'\n\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n      <AttendanceSheet />\n    </div>\n  );\n}\n\n// ========================================\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}